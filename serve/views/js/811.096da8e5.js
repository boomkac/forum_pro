"use strict";(self["webpackChunkforum_static"]=self["webpackChunkforum_static"]||[]).push([[811],{9811:function(e,t,s){s.r(t),s.d(t,{default:function(){return M}});var n=s(3396),a=s(9242);const l={class:"main_body clearfix"},i=(0,n._)("div",{class:"message_top"},[(0,n._)("div",{class:"title"})],-1),o={class:"comment_body"},c={class:"new_title"},u=(0,n._)("div",null,"标题：",-1),r={class:"comment_content"},m=(0,n._)("div",null,[(0,n._)("p",null,"发表文章：")],-1),d={class:"comment_operate"},_=(0,n._)("div",null,null,-1);function v(e,t,s,v,g,p){return(0,n.wg)(),(0,n.iD)("div",l,[i,(0,n._)("div",o,[(0,n._)("div",c,[u,(0,n.wy)((0,n._)("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":t[0]||(t[0]=e=>v.title=e)},null,512),[[a.nr,v.title]])]),(0,n._)("div",r,[m,(0,n.wy)((0,n._)("textarea",{name:"content",id:"content","onUpdate:modelValue":t[1]||(t[1]=e=>v.message=e)},null,512),[[a.nr,v.message]])]),(0,n._)("div",d,[(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>v.submitMessage&&v.submitMessage(...e))},"发表"),_])])])}var g=s(65),p=s(678),f=s(6265),h=s.n(f),w=s(4870),b={name:"NewMessage",setup(){const e=(0,p.tv)();(0,g.oR)();(0,n.wF)((()=>{h().get("/api/isLogin").then((t=>{"YES"!==t.data&&(sessionStorage.removeItem("user"),alert("请登录"),e.push("/login"))})).catch((t=>{alert("服务器错误"),e.go(-1)}))}));let t=(0,w.iH)(""),s=(0,w.iH)("");const a=()=>{h().post("/api/new_message",{title:t.value,content:s.value}).then((t=>{console.log(t.data),alert("发表成功"),e.push("/main")})).catch((e=>alert("发表失败，请稍后重试")))};return{title:t,message:s,submitMessage:a}}},k=s(89);const y=(0,k.Z)(b,[["render",v]]);var M=y}}]);