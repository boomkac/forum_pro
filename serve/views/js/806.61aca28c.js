"use strict";(self["webpackChunkforum_static"]=self["webpackChunkforum_static"]||[]).push([[806],{9806:function(e,n,l){l.r(n),l.d(n,{default:function(){return I}});var t=l(3396),s=l(9242);const a={class:"main clearfix"},o={class:"user_div"},r={class:"phone"},i=(0,t._)("span",null,"手机号：",-1),u=(0,t._)("div",{class:"pwd_div"},null,-1),d={class:"password"},p=(0,t._)("span",null,"密　码：",-1),c={class:"btn_div"},v=(0,t._)("span",null,"登录",-1),_=[v],h={class:"to_register"},w=(0,t.Uk)(" 没有账户？点击注册 ");function g(e,n,l,v,g,f){const m=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",a,[(0,t._)("div",null,[(0,t._)("div",o,[(0,t._)("div",r,[i,(0,t._)("div",null,[(0,t.wy)((0,t._)("input",{type:"tel",id:"phone","onUpdate:modelValue":n[0]||(n[0]=e=>v.phone=e),placeholder:"请输入手机号"},null,512),[[s.nr,v.phone]])])])]),u,(0,t._)("div",d,[p,(0,t._)("div",null,[(0,t.wy)((0,t._)("input",{type:"password",id:"password","onUpdate:modelValue":n[1]||(n[1]=e=>v.password=e),placeholder:"请输入密码",onKeypress:n[2]||(n[2]=(0,s.D2)(((...e)=>v.login&&v.login(...e)),["enter"]))},null,544),[[s.nr,v.password]])])]),(0,t._)("div",c,[(0,t._)("button",{id:"btn",onClick:n[3]||(n[3]=(...e)=>v.login&&v.login(...e))},_)]),(0,t._)("div",h,[(0,t.Wm)(m,{to:"/register"},{default:(0,t.w5)((()=>[w])),_:1})])])])}var f=l(4870),m=l(678),k=l(65),y=l(6265),b=l.n(y),C={name:"UserLogin",setup(){const e=(0,k.oR)(),n=(0,m.tv)();let l=(0,f.iH)(null),t=(0,f.iH)("");const s=()=>l.value?t.value?/^\d{11}$/.test(l.value)?void b()({method:"post",url:"/api/login",data:{phone:l.value,password:t.value},withCredentials:!0}).then((l=>{const t=l.data;if("LOGINFAIL"===t)return alert("账号或密码错误");sessionStorage.setItem("user",JSON.stringify(t)),alert("登录成功"),e.commit("CHANGEUSER",t),n.go(-1)})).catch((()=>{alert("服务器错误")})):alert("请输入正确格式的手机号码！"):alert("请输入密码"):alert("请输入手机号码");return{phone:l,password:t,login:s}}},U=l(89);const H=(0,U.Z)(C,[["render",g]]);var I=H}}]);